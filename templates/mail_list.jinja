                <!-- This entire content is swapped into #main-content-area -->
                <main id="list-pane"
                    class="w-full md:w-1/3 xl:w-1/4 flex-shrink-0 border-r border-gray-200 overflow-y-auto custom-scrollbar bg-white">
                    <header class="p-5 border-b border-gray-200 sticky top-0 bg-white z-10 shadow-sm">
                        <h2 class="text-xl font-semibold text-gray-900">Inbox (3 Unread)</h2>

                        <div class="mt-3 relative">
                            <input
                                type="search"
                                name="search_input"
                                id="search-input"
                                placeholder="Search: from:user subject:topic rag:semantic from_date:2024-01-01 to_date:2024-12-31"
                                class="form-control w-full p-3 rounded-xl bg-gray-50 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm placeholder-gray-500"
                                hx-post="/api/search"
                                hx-vals"js:this"
                                hx-trigger="keyup[key=='Enter']"
                                hx-target="#email-list-container"
                                hx-indicator="#loading-indicator"
                            >
                            <div id="search-badges" class="absolute left-2 top-1/2 -translate-y-1/2 flex items-center hidden">
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            ðŸ’¡ <strong>Filters:</strong> from: subject: rag: (semantic) from_date: to_date:
                        </p>
                    </header>

                    <!-- HTMX load the initial list content -->
                    <div id="email-list-container"
                        hx-get="/api/email/list{{ '?folder='+folder if folder else '' }}"
                        hx-trigger="load"
                        hx-target="this"
                        hx-swap="innerHTML">
                        <div class="p-8 text-center text-gray-500">Loading inbox...</div>
                    </div>
                </main>

                <!-- 3. Content Pane (The 2/3 width column) -->
                 <div id="detail-pane"
                 class="flex flex-col flex-grow bg-white border-l border-gray-200 shadow-lg h-full overflow-hidden md:w-2/3 xl:w-3/4">
                    <div class="mb-6 pb-4 border-b border-gray-100 sticky top-0 bg-white z-10 shadow-sm -mx-6 px-6">
                <h2 class="text-2xl font-extrabold text-gray-900">Project Proposal: Windtail Mail Client</h2>
                <p class="text-sm text-gray-500 mt-1">5 Messages in this thread</p>
            </div>

            <!-- HTMX: Load More Messages (Visual Simulation) -->
            <div class="text-center mb-6">
                <button hx-get="/api/threads/123/more" hx-swap="beforebegin" hx-target="#thread-end"
                        class="text-primary-light hover:text-indigo-800 text-sm font-medium transition duration-150">
                    <svg class="inline-block w-4 h-4 mr-1 -mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    Load 2 Older Messages
                </button>
            </div>

            <div class="flex-grow flex items-center justify-center text-gray-500">
                <div class="text-center p-8">
                    <svg class="w-12 h-12 mx-auto mb-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    <p class="text-lg font-medium">Select an email to view details</p>
                    <p class="text-sm mt-1">Click any item on the left to load the details instantly.</p>
                </div>
            </div>
        </div>